{
  "info": {
    "_postman_id": "c65a4c77-1e1e-4bca-b28f-661a095e9c83",
    "name": "ACHDATA - YY",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "14006869",
    "_collection_link": "https://go.postman.co/collection/14006869-c65a4c77-1e1e-4bca-b28f-661a095e9c83?source=collection_link"
  },
  "item": [
    {
      "name": "Autenticacion",
      "item": [
        {
          "name": "AT - Autenticacion",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Post-response: Código HTTP 200\", function () {",
                  "   pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Post-response: Header Set-Cookie con TOKEN\", function () {",
                  "   pm.response.to.have.header(\"Set-Cookie\");",
                  "   var setCookieHeader = pm.response.headers.get('Set-Cookie');",
                  "   pm.expect(setCookieHeader).to.include(\"TOKEN=\");",
                  "});",
                  "",
                  "var setCookieHeader = pm.response.headers.get('Set-Cookie');",
                  "var tokenMatch = setCookieHeader ? setCookieHeader.match(/TOKEN=(.*?);/) : null;",
                  "",
                  "pm.test(\"Post-response: Se extrae y almacena TOKEN correctamente en tokenAT\", function () {",
                  "   pm.expect(tokenMatch).to.not.be.null;",
                  "   if (tokenMatch) {",
                  "      var token = tokenMatch[1];",
                  "      pm.environment.set(\"tokenAT\", token);",
                  "      pm.expect(pm.environment.get(\"tokenAT\")).to.eql(token);",
                  "   }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const headerSchema = {",
                  "   type: \"object\",",
                  "   required: [\"Content-Type\", \"Client-Id\", \"Client-Secret\"],",
                  "   properties: {",
                  "      \"Content-Type\": {",
                  "         type: \"string\",",
                  "         enum: [\"application/json\"]",
                  "      },",
                  "      \"Client-Id\": {",
                  "         type: \"string\",",
                  "         pattern: \"^[a-f0-9]{32}$\"",
                  "      },",
                  "      \"Client-Secret\": {",
                  "         type: \"string\",",
                  "         pattern: \"^[a-f0-9]{32}$\"",
                  "      },",
                  "      \"Cookie\": {",
                  "         type: \"string\",",
                  "         minLength: 1,",
                  "         pattern: \"^(.*?=.*?)(;\\\\s*.*?=.*?)*$\"",
                  "      }",
                  "   },",
                  "   additionalProperties: true",
                  "};",
                  "",
                  "let headers = {};",
                  "pm.request.headers.each(h => headers[h.key] = h.value);",
                  "",
                  "pm.test(\"Pre-request: Esquema Headers válido\", function () {",
                  "   pm.expect(tv4.validate(headers, headerSchema)).to.be.true;",
                  "});",
                  "",
                  "const bodySchema = {",
                  "   type: \"object\",",
                  "   required: [\"tenant\", \"email\", \"password\"],",
                  "   properties: {",
                  "      tenant: { type: \"string\", minLength: 1 },",
                  "      email: {",
                  "         type: \"string\",",
                  "         pattern: \"^[\\\\w.+-]+@[\\\\w.-]+\\\\.[a-zA-Z]{2,}$\"",
                  "      },",
                  "      password: {",
                  "         type: \"string\",",
                  "         minLength: 8,",
                  "         pattern: \"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[^A-Za-z\\\\d]).+$\"",
                  "      }",
                  "   }",
                  "};",
                  "",
                  "let rawBody = pm.request.body?.raw || \"\";",
                  "",
                  "let cleanedBody = rawBody",
                  "   .split('\\n')",
                  "   .filter(line => !line.trim().startsWith('//'))",
                  "   .join('\\n')",
                  "   .trim();",
                  "",
                  "let body = {};",
                  "",
                  "pm.test(\"Pre-request: Esquema Body válido\", function () {",
                  "   if (Object.keys(body).length > 0) {",
                  "      pm.expect(tv4.validate(body, bodySchema)).to.be.true;",
                  "   } else {",
                  "      pm.expect(true).to.be.true;",
                  "   }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Client-Id",
                "value": "5a916fc816cd6899523671e2ea0ae51d",
                "type": "text"
              },
              {
                "key": "Client-Secret",
                "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "// {\r\n//    \"tenant\": \"ach\",\r\n//    \"email\": \"jgoyeneche@achcolombia.com.co\",\r\n//    \"password\": \"ACH_Diciembr2025+\"\r\n// }\r\n\r\n{\r\n\"tenant\": \"ach\",\r\n\"email\": \"asrodriguez@achcolombia.com.co\",\r\n\"password\": \"Pruebas1010*\"\r\n}\r\n\r\n// {\r\n// \"tenant\": \"ach\",\r\n// \"email\": \"eerazo@achcolombia.com.co\",\r\n// \"password\": \"Navidad2025*\"\r\n// }\r\n\r\n// {\r\n//    \"tenant\": \"ach\",\r\n//    \"email\": \"fjerez@achcolombia.com.co\",\r\n//    \"password\": \"ACH_december2025+\"\r\n// }\r\n\r\n// {\r\n//     \"tenant\": \"ach\",\r\n//     \"email\": \"sdata1@achcolombia.com.co\",\r\n//     \"password\": \"So1d4t4Ag0st02021$\"\r\n// }\r\n\r\n// {\r\n//    \"tenant\": \"ef090\",\r\n//    \"email\": \"luisabernal@cbit-online.com\",\r\n//    \"password\": \"Colombia1010*\"\r\n// }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL_AT}}/administracion/auth/token",
              "host": [
                "{{URL_AT}}"
              ],
              "path": [
                "administracion",
                "auth",
                "token"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Consultas",
      "item": [
        {
          "name": "Detallada Natural Y Juridica",
          "item": [
            {
              "name": "AT - Detallada Natural Y Juridica",
              "item": [
                {
                  "name": "Consulta Individual Natural",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const identificaciones = [\r",
                          "   'CC1012447362',\r",
                          "   'CC1000255',\r",
                          "   'PT7007171',\r",
                          "   'CD7007474',\r",
                          "   //Con novedades\r",
                          "   'CC80822351',\r",
                          "   'CC1026266841'\r",
                          "];\r",
                          "\r",
                          "const randomIndex = Math.floor(Math.random() * identificaciones.length);\r",
                          "const seleccionada = identificaciones[randomIndex];\r",
                          "\r",
                          "pm.environment.set(\"TipoNúmero_Documento\", seleccionada);\r",
                          "\r",
                          "const headerSchema = {\r",
                          "  type: \"object\",\r",
                          "  required: [\"Content-Type\", \"Client-Id\", \"Client-Secret\", \"Cookie\"],\r",
                          "  properties: {\r",
                          "    \"Content-Type\": { \r",
                          "      type: \"string\", \r",
                          "      enum: [\"application/pdf\"] \r",
                          "    },\r",
                          "    \"Client-Id\": { \r",
                          "      type: \"string\", \r",
                          "      pattern: \"^[a-f0-9]{32}$\" \r",
                          "    },\r",
                          "    \"Client-Secret\": { \r",
                          "      type: \"string\", \r",
                          "      pattern: \"^[a-f0-9]{32}$\" \r",
                          "    },\r",
                          "    \"Cookie\": {\r",
                          "      type: \"string\",\r",
                          "      minLength: 1,\r",
                          "      pattern: \"^.+$\"\r",
                          "    }\r",
                          "  },\r",
                          "  additionalProperties: true\r",
                          "};\r",
                          "\r",
                          "let headers = {};\r",
                          "pm.request.headers.each(h => headers[h.key] = h.value);\r",
                          "\r",
                          "pm.test(\"Pre-request: Esquema Headers válido\", function () {\r",
                          "  pm.expect(tv4.validate(headers, headerSchema)).to.be.true;\r",
                          "});\r",
                          "\r",
                          "const queryParams = pm.request.url.query.toObject();\r",
                          "\r",
                          "const querySchema = {\r",
                          "  type: \"object\",\r",
                          "  required: [\"historico\", \"aceptaAutorizacion\"],\r",
                          "  properties: {\r",
                          "    historico: {\r",
                          "      type: \"string\",\r",
                          "      pattern: \"^[0-9]{1,3}$\"\r",
                          "    },\r",
                          "    aceptaAutorizacion: {\r",
                          "      type: \"string\",\r",
                          "      enum: [\"true\", \"false\"]\r",
                          "    }\r",
                          "  }\r",
                          "};\r",
                          "\r",
                          "pm.test(\"Pre-request: Esquema Query válido\", function () {\r",
                          "  pm.expect(tv4.validate(queryParams, querySchema)).to.be.true;\r",
                          "});\r",
                          "\r",
                          "pm.test(\"Pre-request: Histórico en rango permitido (1–36)\", function () {\r",
                          "  const h = Number(queryParams.historico);\r",
                          "  pm.expect(h).to.be.within(1, 36);\r",
                          "});"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.test(\"Post-response: Código HTTP 200\", function () {\r",
                          "   pm.response.to.have.status(200);\r",
                          "});"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "GET",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/pdf",
                        "type": "text"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}",
                        "type": "text"
                      }
                    ],
                    "url": {
                      "raw": "{{URL_AT}}/consultas/individuales/personas/naturales/{{TipoNúmero_Documento}}?historico=36&aceptaAutorizacion=true",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "individuales",
                        "personas",
                        "naturales",
                        "{{TipoNúmero_Documento}}"
                      ],
                      "query": [
                        {
                          "key": "historico",
                          "value": "36"
                        },
                        {
                          "key": "aceptaAutorizacion",
                          "value": "true"
                        }
                      ]
                    }
                  },
                  "response": []
                },
                {
                  "name": "Consulta Individual Natural - Simple",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const identificaciones = [\r",
                          "   'CC8200182421',\r",
                          "   'CC8200268672',\r",
                          "   'CC8200457725',\r",
                          "   'CC8200500183',\r",
                          "   'CC8200916948',\r",
                          "   'CC8201075743',\r",
                          "   'CC8201271538',\r",
                          "   'CC8201489565',\r",
                          "   'CC10011974918087',\r",
                          "   'CC10812923381040',\r",
                          "   'CC111937696309403',\r",
                          "   'CC113016688631066',\r",
                          "];\r",
                          "\r",
                          "const randomIndex = Math.floor(Math.random() * identificaciones.length);\r",
                          "const seleccionada = identificaciones[randomIndex];\r",
                          "\r",
                          "pm.environment.set(\"TipoNúmero_Documento\", seleccionada);\r",
                          "\r",
                          "const headerSchema = {\r",
                          "  type: \"object\",\r",
                          "  required: [\"Content-Type\", \"Client-Id\", \"Client-Secret\", \"Cookie\"],\r",
                          "  properties: {\r",
                          "    \"Content-Type\": { \r",
                          "      type: \"string\", \r",
                          "      enum: [\"application/pdf\"] \r",
                          "    },\r",
                          "    \"Client-Id\": { \r",
                          "      type: \"string\", \r",
                          "      pattern: \"^[a-f0-9]{32}$\" \r",
                          "    },\r",
                          "    \"Client-Secret\": { \r",
                          "      type: \"string\", \r",
                          "      pattern: \"^[a-f0-9]{32}$\" \r",
                          "    },\r",
                          "    \"Cookie\": {\r",
                          "      type: \"string\",\r",
                          "      minLength: 1,\r",
                          "      pattern: \"^.+$\"\r",
                          "    }\r",
                          "  },\r",
                          "  additionalProperties: true\r",
                          "};\r",
                          "\r",
                          "let headers = {};\r",
                          "pm.request.headers.each(h => headers[h.key] = h.value);\r",
                          "\r",
                          "pm.test(\"Pre-request: Esquema Headers válido\", function () {\r",
                          "  pm.expect(tv4.validate(headers, headerSchema)).to.be.true;\r",
                          "});\r",
                          "\r",
                          "const queryParams = pm.request.url.query.toObject();\r",
                          "\r",
                          "const querySchema = {\r",
                          "  type: \"object\",\r",
                          "  required: [\"historico\", \"aceptaAutorizacion\"],\r",
                          "  properties: {\r",
                          "    historico: {\r",
                          "      type: \"string\",\r",
                          "      pattern: \"^[0-9]{1,3}$\"\r",
                          "    },\r",
                          "    aceptaAutorizacion: {\r",
                          "      type: \"string\",\r",
                          "      enum: [\"true\", \"false\"]\r",
                          "    }\r",
                          "  }\r",
                          "};\r",
                          "\r",
                          "pm.test(\"Pre-request: Esquema Query válido\", function () {\r",
                          "  pm.expect(tv4.validate(queryParams, querySchema)).to.be.true;\r",
                          "});\r",
                          "\r",
                          "pm.test(\"Pre-request: Histórico en rango permitido (1–36)\", function () {\r",
                          "  const h = Number(queryParams.historico);\r",
                          "  pm.expect(h).to.be.within(1, 36);\r",
                          "});"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.test(\"Post-response: Código HTTP 200\", function () {\r",
                          "   pm.response.to.have.status(200);\r",
                          "});"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "GET",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/pdf",
                        "type": "text"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}",
                        "type": "text"
                      }
                    ],
                    "url": {
                      "raw": "{{URL_AT}}/consultas/individuales/personas/naturales/{{TipoNúmero_Documento}}?historico=36&aceptaAutorizacion=true",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "individuales",
                        "personas",
                        "naturales",
                        "{{TipoNúmero_Documento}}"
                      ],
                      "query": [
                        {
                          "key": "historico",
                          "value": "36"
                        },
                        {
                          "key": "aceptaAutorizacion",
                          "value": "true"
                        }
                      ]
                    }
                  },
                  "response": []
                },
                {
                  "name": "Consulta Masiva Natural",
                  "event": [
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "if (pm.response.code === 200) {\r",
                          "    let res = pm.response.json();\r",
                          "    \r",
                          "    if (res && res.queryUuid) {\r",
                          "        pm.environment.set(\"queryUuid\", res.queryUuid);\r",
                          "        console.log(\"queryUuid guardado:\", res.queryUuid);\r",
                          "    } else {\r",
                          "        console.warn(\"No se recibió queryUuid en la respuesta:\", res);\r",
                          "    }\r",
                          "} else {\r",
                          "    console.error(\"Error en consulta masiva:\", pm.response.text());\r",
                          "}"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "POST",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/json"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}",
                        "type": "text"
                      }
                    ],
                    "body": {
                      "mode": "formdata",
                      "formdata": [
                        {
                          "key": "Archivo",
                          "type": "file",
                          "uuid": "89007998-29ad-48e0-90ca-805f17a26159",
                          "src": "{{file50Registros}}"
                        }
                      ]
                    },
                    "url": {
                      "raw": "{{URL_AT}}/consultas/masivas/?nombreConsulta=PruebaAPI&historico=36&tipo=Natural",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "masivas",
                        ""
                      ],
                      "query": [
                        {
                          "key": "nombreConsulta",
                          "value": "PruebaAPI"
                        },
                        {
                          "key": "historico",
                          "value": "36"
                        },
                        {
                          "key": "tipo",
                          "value": "Natural"
                        }
                      ]
                    }
                  },
                  "response": []
                },
                {
                  "name": "Consulta Archivo Masiva Natural Estado",
                  "request": {
                    "method": "GET",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/json",
                        "type": "text"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}",
                        "type": "text"
                      }
                    ],
                    "url": {
                      "raw": "{{URL_AT}}/consultas/masivas/{{queryUuid}}/estado?aceptaAutorizacion=true",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "masivas",
                        "{{queryUuid}}",
                        "estado"
                      ],
                      "query": [
                        {
                          "key": "aceptaAutorizacion",
                          "value": "true"
                        }
                      ]
                    }
                  },
                  "response": []
                },
                {
                  "name": "Descarga Archivo Masiva Natural",
                  "request": {
                    "method": "GET",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/zip",
                        "type": "text"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}",
                        "type": "text"
                      }
                    ],
                    "url": {
                      "raw": "{{URL_AT}}/consultas/masivas/{{queryUuid}}?aceptaAutorizacion=true",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "masivas",
                        "{{queryUuid}}"
                      ],
                      "query": [
                        {
                          "key": "aceptaAutorizacion",
                          "value": "true"
                        }
                      ]
                    }
                  },
                  "response": []
                },
                {
                  "name": "Consulta Individual Juridica",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const identificaciones = [\r",
                          "   'NI901043027',\r",
                          "   'NI1610202440',\r",
                          "   'NI76554823',\r",
                          "   'CC7007777',\r",
                          "   'SC7007676'\r",
                          "];\r",
                          "\r",
                          "const randomIndex = Math.floor(Math.random() * identificaciones.length);\r",
                          "const seleccionada = identificaciones[randomIndex];\r",
                          "\r",
                          "pm.environment.set(\"TipoNúmero_Documento\", seleccionada);\r",
                          "\r",
                          "const headerSchema = {\r",
                          "  type: \"object\",\r",
                          "  required: [\"Content-Type\", \"Client-Id\", \"Client-Secret\", \"Cookie\"],\r",
                          "  properties: {\r",
                          "    \"Content-Type\": { \r",
                          "      type: \"string\", \r",
                          "      enum: [\"application/pdf\"] \r",
                          "    },\r",
                          "    \"Client-Id\": { \r",
                          "      type: \"string\", \r",
                          "      pattern: \"^[a-f0-9]{32}$\" \r",
                          "    },\r",
                          "    \"Client-Secret\": { \r",
                          "      type: \"string\", \r",
                          "      pattern: \"^[a-f0-9]{32}$\" \r",
                          "    },\r",
                          "    \"Cookie\": {\r",
                          "      type: \"string\",\r",
                          "      minLength: 1,\r",
                          "      pattern: \"^.+$\"\r",
                          "    }\r",
                          "  },\r",
                          "  additionalProperties: true\r",
                          "};\r",
                          "\r",
                          "let headers = {};\r",
                          "pm.request.headers.each(h => headers[h.key] = h.value);\r",
                          "\r",
                          "pm.test(\"Pre-request: Esquema Headers válido\", function () {\r",
                          "  pm.expect(tv4.validate(headers, headerSchema)).to.be.true;\r",
                          "});\r",
                          "\r",
                          "const queryParams = pm.request.url.query.toObject();\r",
                          "\r",
                          "const querySchema = {\r",
                          "  type: \"object\",\r",
                          "  required: [\"historico\", \"aceptaAutorizacion\"],\r",
                          "  properties: {\r",
                          "    historico: {\r",
                          "      type: \"string\",\r",
                          "      pattern: \"^[0-9]{1,3}$\"\r",
                          "    },\r",
                          "    aceptaAutorizacion: {\r",
                          "      type: \"string\",\r",
                          "      enum: [\"true\", \"false\"]\r",
                          "    }\r",
                          "  }\r",
                          "};\r",
                          "\r",
                          "pm.test(\"Pre-request: Esquema Query válido\", function () {\r",
                          "  pm.expect(tv4.validate(queryParams, querySchema)).to.be.true;\r",
                          "});\r",
                          "\r",
                          "pm.test(\"Pre-request: Histórico en rango permitido (1–36)\", function () {\r",
                          "  const h = Number(queryParams.historico);\r",
                          "  pm.expect(h).to.be.within(1, 36);\r",
                          "});"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.test(\"Post-response: Código HTTP 200\", function () {\r",
                          "   pm.response.to.have.status(200);\r",
                          "});"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "GET",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/pdf",
                        "type": "text"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}",
                        "type": "text"
                      }
                    ],
                    "url": {
                      "raw": "{{URL_AT}}/consultas/individuales/personas/juridicas/{{TipoNúmero_Documento}}?historico=36&aceptaAutorizacion=true",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "individuales",
                        "personas",
                        "juridicas",
                        "{{TipoNúmero_Documento}}"
                      ],
                      "query": [
                        {
                          "key": "historico",
                          "value": "36"
                        },
                        {
                          "key": "aceptaAutorizacion",
                          "value": "true"
                        }
                      ]
                    }
                  },
                  "response": []
                },
                {
                  "name": "Consulta Individual Juridica - Simple",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const identificaciones = [\r",
                          "   'NI8220135190',\r",
                          "   'NI8238464444',\r",
                          "   'NI8252252839',\r",
                          "   'NI8252823830',\r",
                          "   'NI8255707095',\r",
                          "   'NI8265763246',\r",
                          "   'NI8287501570',\r",
                          "   'NI17156980104',\r",
                          "   'NI21611930462',\r",
                          "   'NI22096607394',\r",
                          "];\r",
                          "\r",
                          "const randomIndex = Math.floor(Math.random() * identificaciones.length);\r",
                          "const seleccionada = identificaciones[randomIndex];\r",
                          "\r",
                          "pm.environment.set(\"TipoNúmero_Documento\", seleccionada);\r",
                          "\r",
                          "const headerSchema = {\r",
                          "  type: \"object\",\r",
                          "  required: [\"Content-Type\", \"Client-Id\", \"Client-Secret\", \"Cookie\"],\r",
                          "  properties: {\r",
                          "    \"Content-Type\": { \r",
                          "      type: \"string\", \r",
                          "      enum: [\"application/pdf\"] \r",
                          "    },\r",
                          "    \"Client-Id\": { \r",
                          "      type: \"string\", \r",
                          "      pattern: \"^[a-f0-9]{32}$\" \r",
                          "    },\r",
                          "    \"Client-Secret\": { \r",
                          "      type: \"string\", \r",
                          "      pattern: \"^[a-f0-9]{32}$\" \r",
                          "    },\r",
                          "    \"Cookie\": {\r",
                          "      type: \"string\",\r",
                          "      minLength: 1,\r",
                          "      pattern: \"^.+$\"\r",
                          "    }\r",
                          "  },\r",
                          "  additionalProperties: true\r",
                          "};\r",
                          "\r",
                          "let headers = {};\r",
                          "pm.request.headers.each(h => headers[h.key] = h.value);\r",
                          "\r",
                          "pm.test(\"Pre-request: Esquema Headers válido\", function () {\r",
                          "  pm.expect(tv4.validate(headers, headerSchema)).to.be.true;\r",
                          "});\r",
                          "\r",
                          "const queryParams = pm.request.url.query.toObject();\r",
                          "\r",
                          "const querySchema = {\r",
                          "  type: \"object\",\r",
                          "  required: [\"historico\", \"aceptaAutorizacion\"],\r",
                          "  properties: {\r",
                          "    historico: {\r",
                          "      type: \"string\",\r",
                          "      pattern: \"^[0-9]{1,3}$\"\r",
                          "    },\r",
                          "    aceptaAutorizacion: {\r",
                          "      type: \"string\",\r",
                          "      enum: [\"true\", \"false\"]\r",
                          "    }\r",
                          "  }\r",
                          "};\r",
                          "\r",
                          "pm.test(\"Pre-request: Esquema Query válido\", function () {\r",
                          "  pm.expect(tv4.validate(queryParams, querySchema)).to.be.true;\r",
                          "});\r",
                          "\r",
                          "pm.test(\"Pre-request: Histórico en rango permitido (1–36)\", function () {\r",
                          "  const h = Number(queryParams.historico);\r",
                          "  pm.expect(h).to.be.within(1, 36);\r",
                          "});"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.test(\"Post-response: Código HTTP 200\", function () {\r",
                          "   pm.response.to.have.status(200);\r",
                          "});"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "GET",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/pdf",
                        "type": "text"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}",
                        "type": "text"
                      }
                    ],
                    "url": {
                      "raw": "{{URL_AT}}/consultas/individuales/personas/juridicas/{{TipoNúmero_Documento}}?historico=36&aceptaAutorizacion=true",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "individuales",
                        "personas",
                        "juridicas",
                        "{{TipoNúmero_Documento}}"
                      ],
                      "query": [
                        {
                          "key": "historico",
                          "value": "36"
                        },
                        {
                          "key": "aceptaAutorizacion",
                          "value": "true"
                        }
                      ]
                    }
                  },
                  "response": []
                },
                {
                  "name": "Consulta Masiva Juridica",
                  "event": [
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "if (pm.response.code === 200) {\r",
                          "    let res = pm.response.json();\r",
                          "    \r",
                          "    if (res && res.queryUuid) {\r",
                          "        pm.environment.set(\"queryUuid\", res.queryUuid);\r",
                          "        console.log(\"queryUuid guardado:\", res.queryUuid);\r",
                          "    } else {\r",
                          "        console.warn(\"No se recibió queryUuid en la respuesta:\", res);\r",
                          "    }\r",
                          "} else {\r",
                          "    console.error(\"Error en consulta masiva:\", pm.response.text());\r",
                          "}"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "POST",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/json"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}"
                      }
                    ],
                    "body": {
                      "mode": "formdata",
                      "formdata": [
                        {
                          "key": "Archivo",
                          "type": "file",
                          "uuid": "89007998-29ad-48e0-90ca-805f17a26159",
                          "src": "{{file50Registros}}"
                        }
                      ]
                    },
                    "url": {
                      "raw": "{{URL_AT}}/consultas/masivas/?nombreConsulta=PruebaAPI&historico=36&tipo=Juridica",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "masivas",
                        ""
                      ],
                      "query": [
                        {
                          "key": "nombreConsulta",
                          "value": "PruebaAPI"
                        },
                        {
                          "key": "historico",
                          "value": "36"
                        },
                        {
                          "key": "tipo",
                          "value": "Juridica"
                        }
                      ]
                    }
                  },
                  "response": []
                },
                {
                  "name": "Consulta Archivo Masiva Juridica Estado",
                  "request": {
                    "method": "GET",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/zip",
                        "type": "text"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}",
                        "type": "text"
                      }
                    ],
                    "url": {
                      "raw": "{{URL_AT}}/consultas/masivas/{{queryUuid}}/estado?aceptaAutorizacion=true",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "masivas",
                        "{{queryUuid}}",
                        "estado"
                      ],
                      "query": [
                        {
                          "key": "aceptaAutorizacion",
                          "value": "true"
                        }
                      ]
                    }
                  },
                  "response": []
                },
                {
                  "name": "Descarga Archivo Masiva Juridica",
                  "request": {
                    "method": "GET",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/zip",
                        "type": "text"
                      },
                      {
                        "key": "Client-Id",
                        "value": "5a916fc816cd6899523671e2ea0ae51d",
                        "type": "text"
                      },
                      {
                        "key": "Client-Secret",
                        "value": "c21aefb554fcf8712a6e8d9cc3b99f8d",
                        "type": "text"
                      },
                      {
                        "key": "Cookie",
                        "value": "{{tokenAT}}",
                        "type": "text"
                      }
                    ],
                    "url": {
                      "raw": "{{URL_AT}}/consultas/masivas/{{queryUuid}}?aceptaAutorizacion=true",
                      "host": [
                        "{{URL_AT}}"
                      ],
                      "path": [
                        "consultas",
                        "masivas",
                        "{{queryUuid}}"
                      ],
                      "query": [
                        {
                          "key": "aceptaAutorizacion",
                          "value": "true"
                        }
                      ]
                    }
                  },
                  "response": []
                }
              ],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      ""
                    ]
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      ""
                    ]
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "tipo",
      "value": ""
    },
    {
      "key": "TipoNúmero_Documento",
      "value": ""
    },
    {
      "key": "identificaciones_restantes",
      "value": ""
    },
    {
      "key": "fechaInicial",
      "value": ""
    },
    {
      "key": "fechaFinal",
      "value": ""
    },
    {
      "key": "referenciaRecaudo",
      "value": ""
    },
    {
      "key": "idTransaccion",
      "value": ""
    },
    {
      "key": "codigoAutorizacion",
      "value": ""
    },
    {
      "key": "tipoTransaccion",
      "value": ""
    },
    {
      "key": "entidadRecaudadora",
      "value": ""
    },
    {
      "key": "codigoCanalRecepcion",
      "value": ""
    },
    {
      "key": "postResponseGuardarQueryUuid",
      "value": ""
    }
  ]
}